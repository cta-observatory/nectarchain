#launching DIRAC proxy
#dirac-proxy-init -M -g cta_nectarcam d

# chmod +x submit_job_thermal.sh 
# sbatch submit_job_thermal.sh 
#squeue -u hashkar
#scontrol show job JOB_ID
#srun --time=01:00:00 --ntasks=1 --cpus-per-task=4 --mem=8G --partition=htc --pty bash
#scancel JOBID

# still failed  
#Needed on cc: 
#Missed in charge: 
#Did not not work in pix_tim 6819 7053 
#Gain photostat

#ToM: 7042 7099 6976 7166 6565 6694 6751 

#8V 
#0 NSB:   7020 7077 6954 7144 6543 6672 6729 6807 - - 
#10.6 mA: 7029 7086 6963 7153 6552 6681 6738 6816 - - 
#20.4 mA: 7038 7095 6972 7162 6561 6690 6747 6825 - -
#39.8 mA: 7047 7104 6981 7171 6570 6699 6756 6834 - -
#78.8 mA: 7056 7113 6990 7180 6579 6708 6765 6843 - -

#9V
#0 NSB:   7021 7078 6955 7145 6544 6673 6730 6808 - -
#10.6 mA: 7030 7087 6964 7154 6553 6682 6739 6817 - - NOP
#20.4 mA: 7039 7096 6973 7163 6562 6691 6748 6826 - - NOP
#39.8 mA: 7048 7105 6982 7172 6571 6700 6757 6835 - - NOP
#78.8 mA: 7057 7114 6991 7181 6580 6709 6766 6844 - - NOP

#10V.  
#0 NSB: 7022 7079 6956 7146 6545 6674 6731 6809 
#10.6 mA: 7031 7088 6965 7155 6554 6683 6740 6818
#20.4 mA: 7040 7097 6974 7164 6563 6692 6749 6827
#39.8 mA: 7049 7106 6983 7173 6572 6701 6758 6836
#78.8 mA: 7058 7115 6992 7183 6581 6710 6767 6845

#11V.  
#0 NSB: 7023 7080 6957 7147 6546 6675 6732 6810 
#10.6 mA: 7032 7089 6966 7156 6555 6684 6741 6819 - - NOP
#20.4 mA: 7041 7098 6975 7165 6564 6693 6750 6828 - - NOP
#39.8 mA: 7050 7107 6984 7174 6573 6702 6759 6837 - - NOP
#78.8 mA: 7059 7116 6993 7184 6582 6711 6768 6846 - - NOP

#12V
#0 NSB: 7024 7081 6958 7148 6547 6676 6733 6811
#10.6 mA: 7033 7090 6967 7157 6556 6685 6742 6820 - - NOP
#20.4 mA: 7042 7099 6976 7166 6565 6694 6751 6829 - - NOP
#39.8 mA: 7051 7108 6985 7175 6574 6703 6760 6838 - - NOP
#78.8 mA: 7060 7117 6994 7185 6583 6712 6769 6847 - - NOP

#13V
#0 NSB: 7025 7082 6959 7149 6548 6677 6734 6812
#10.6 mA: 7034 7091 6968 7158 6557 6686 6743 6821 - - NOP
#20.4 mA: 7043 7100 6977 7167 6566 6695 6752 6830
#39.8 mA: 7052 7109 6986 7176 6575 6704 6761 6839 - - NOP
#78.8 mA: 7061 7118 6995 7186 6584 6713 6770 6848 - - NOP

#14V
#0 NSB: 7026 7083 6960 7150 6549 6678 6735 6813
#10.6 mA: 7035 7092 6969 7159 6558 6687 6744 6822 - - NOP
#20.4 mA: 7044 7101 6978 7168 6567 6696 6753 6831 - - NOP
#39.8 mA: 7053 7110 6987 7177 6576 6705 6762 6840 - - NOP
#78.8 mA: 7062 7119 6996 7187 6585 6714 6771 6849 - - NOP

#15V
#0 NSB: 7027 7084 6961 7151 6550 6679 6736 6814
#10.6 mA: 7036 7093 6970 7160 6559 6688 6745 6823 - - NOP
#20.4 mA: 7045 7102 6979 7169 6568 6697 6754 6832 - - NOP
#39.8 mA: 7054 7111 6988 7178 6577 6706 6763 6841 - - NOP
#78.8 mA: 7063 7120 6997 7188 6586 6715 6772 6850 - - NOP

#16 V
#0 NSB:   7028 7085 6962 7152 6551 6680 6737 6815
#10.6 mA: 7037 7094 6971 7161 6560 6689 6746 6824
#20.4 mA: 7046 7103 6980 7170 6569 6698 6755 6833 - - NOP
#39.8 mA: 7055 7112 6989 7179 6578 6707 6764 6842 - - NOP
#78.8 mA: 7064 7121 6998 7189 6587 6716 6773 6851 - - NOP



#DEADTIME  # No runs ? yes we have -->
########################################################################
#python deadtime.py  -o "../output/" -s 1 1 1 1 1 1  -r 7018 7141 6952 7212 6787 6805 # 5deg 0deg are missing 
########################################################################


#LINEARITY # This is ok if we use the ones with filters / just missing 14 degrees 
########################################################################
#python linearity.py -o "../output/"
#default=[i for i in range(3404, 3424)] #+ [i for i in range(3435, 3444)], 
########################################################################


#PIX TIM UNCE # Need laser ? can use FF   --> all NSB setting will be put on the plot --> start with one NSB SETTING 
########################################################################
#python pix_tim_uncertainty.py -e 5000 -o "../output/" -r 7020 7077 7144 6543 6672 7029 7088 6963 7153 6552 6681 6738 7038 7095 6972 7162 6561 6690 6747 7047 7104 6981 7171 6570 6699 6756 7056 7113 6990 7180 6579 6708 6765 
########################################################################


#PEDESTALS #Same as above ? FF ?  --> eventually stat with 1 voltage and then all of them 
########################################################################
#python pedestal.py -e 5000 -o "../output/" -r 7020 7077 7144 6543 6672 7029 7088 6963 7153 6552 6681 6738 7038 7095 6972 7162 6561 6690 6747 7047 7104 6981 7171 6570 6699 6756 7056 7113 6990 7180 6579 6708 6765 
#do it for high gain and low gain ? might add low gain later 
# how many events ? 
#for ONE voltage at from 25 to -20:


########################################################################


#DQM FOR CHARGE  #Same as above ? FF ?  // same FF with and without NSB 
########################################################################
#cd ../../../../dqm/
#pwd
#runs=("3630" "3631" "3629" "3628" "3627" "3626" "3625" "3624" "3622" "3623" "3714" "3713" "3712" "3711" "3710" "3709" "3708" "3707" "3706" "3705" "3764" "3763" "3762" "3761" "3760" "3759" "3758" "3757" "3756" "3755" "3798" "3797" "3796" "3795" "3794" "3793" "3792" "3791" "3790" "3789")
#python start_dqm_thermal.py $NECTARDIR/data ../output/charge -r 3793 --method LocalPeakWindowSum --extractor_kwargs '{"window_width":8,"window_shift":4}' -n -p --max-events 1000
#python start_dqm.py $NECTARCAMDATA ./output/ -r 7144  --method LocalPeakWindowSum --extractor_kwargs '{"window_width":8,"window_shift":4}'  -n -p --max-events 1000 
########################################################################

#FF #Same as above ? FF ? without NSB --> start here 
########################################################################
#runs = [10V]
#python flatfield_example.py -r 3731
########################################################################


#GAIN SPEFit # AIV-FF ?? --? use the runs for ff 
########################################################################
#runs = [7066, 7123, 7000, 7191, 6589, 6718, 6775, 6853]
#python gain_SPEfit_computation.py -r 7066  --reload_events --max_events 5000  --method     LocalPeakWindowSum --extractor_kwargs '{"window_width":16,"window_shift":5}' --overwrite -v DEBUG
########################################################################


#GAIN Photostatistic  AIV-FF ??  use the runs for ff 
########################################################################
#runs = [7022, 7079, 6956, 7146, 6545, 6674, 6731, 6809] and there associated pedestal and FF runs
#python gain_PhotoStat_computation.py --FF_run_number 3937 --Ped_run_number 3938 --SPE_run_number 3942 --max_events 1000  --method LocalPeakWindowSum --extractor_kwargs '{"window_width":8,"window_shift":4}' --overwrite -v INFO --reload_events
########################################################################


#THRESHOLD HG/LG
########################################################################
#python no code for the moment -> Francois
########################################################################


#REMANAING work : 

#Photostat script
#THRESHOLD HG/LG script

#THRESHOLD HG/LG plots

